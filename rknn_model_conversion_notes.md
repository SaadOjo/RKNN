# DTSIS: Notes for Model Conversion to RKNN Format
### Authored by: Syed Saad Saif


After you have a trained model in your hand, now you must successfully convert the model from it's respective format to rockchips' custom **rknn** format. The official process to convert the model is given in the following: ```ai/rockchip/rknn-toolkit/doc/Rockchip_User_Guide_RKNN_Toolkit_V1.4.0_EN.pdf```

However note that there are a lot issues associated with conversion and therefore do not expect every model to be converted easily to rknn, some of the common issues associated with conversion are listed below.  

## Issues

1. Unsupported layers

Not all layers supported by main stream platforms are supported by the RKNN platform. Therefore if a model contains a unsupported layers it would have to be replaced by a alternatives, for example sometimes the model contains a unsupported activation layer such as ELU, this can be replaced by ReLU.  
Other times, the functionality of some unsupported layers can be replicated by cascading some primitive layers.

1. Parsing error 

With newer versions of frameworks use a different format to store the layer information. Therefore even if the layer operation is supported by rknn model created by newer versions might not be understood by the rknn parser. In this case it is suitable to port the code to an older framework and then the trained model generated by the older version of the framework.

# Conversion from tensorflow

Trained models created from the tensorflow version 1.14 were found to be well supported the process to convert from tensorflow 1 is documented [here.](tensorflow1_to_rknn.md)